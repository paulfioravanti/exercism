const GREATER = 1
const EQUAL = 0

export const classify = number => {
  if (number < 1) {
    throw new Error("Classification is only possible for natural numbers.")
  }

  switch (Math.sign(aliquotSum(number))) {
    case GREATER:
      return "abundant"
    case EQUAL:
      return "perfect"
    default:
      return "deficient"
  }
}

function aliquotSum(number) {
  return (
    range(number)
      .reduce(addFactor(number), [])
      .reduce(add, 0)
  )
}

function range(number) {
  return [...Array(number + 1).keys()]
}

function addFactor(number) {
  return (acc, candidateFactor) => {
    if (isFactor(candidateFactor, number)) {
      acc.push(candidateFactor)
    }
    return acc
  }
}

function isFactor(candidateFactor, number) {
  return number % candidateFactor === 0
}

function add(acc, factor) {
  return acc + factor
}
